<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Analyze Forest Diversity and Dynamics • fgeo</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Analyze Forest Diversity and Dynamics">
<meta property="og:description" content="Install, load, and access the documentation of
    multiple packages to analyze forest diversity and dynamics. 'fgeo'
    allows you to manipulate and plot ForestGEO data, and to do common
    analyses including abundance, demography, and species-habitats
    associations (&lt;http://www.forestgeo.si.edu/&gt;).">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">fgeo</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/siteonly/reference.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Tutorials
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://fgeocomm.shinyapps.io/basics-vis/">Visualization basics</a>
    </li>
    <li>
      <a href="https://fgeocomm.shinyapps.io/basics-programming/">Programming basics</a>
    </li>
    <li>
      <a href="https://fgeocomm.shinyapps.io/transform-tibbles/">Tibbles</a>
    </li>
    <li>
      <a href="https://fgeocomm.shinyapps.io/transform-isolating/">Isolating data with dplyr</a>
    </li>
    <li>
      <a href="articles/siteonly/eda.html">Exploratory data analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">Release notes</li>
    <li>
      <a href="articles/siteonly/fgeo-1-1-1-release-candidate.html">Release candidate 1.1.1</a>
    </li>
    <li class="divider">
    </li>
<li>
      <a href="news/index.html">Change log</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Community
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/siteonly/fgeo-1-0-0-release-candidate.html">fgeo 1.0.0 release candidate</a>
    </li>
    <li>
      <a href="articles/siteonly/questions-and-answers.html">Q&amp;A</a>
    </li>
    <li>
      <a href="https://rstudio.cloud/project/43852">Try fgeo in rstudio.cloud</a>
    </li>
    <li>
      <a href="https://github.com/forestgeo/learn/issues">Resources</a>
    </li>
    <li>
      <a href="https://github.com/forestgeo/forum/issues">Discuss</a>
    </li>
    <li>
      <a href="https://fgeo.netlify.com/">Blog</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/maurolepore">
    <span class="fa fa-gavel"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/forestgeo/fgeo">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<!-- README.md is generated from README.Rmd. Please edit that file -->
<div id="analyze-forest-diversity-and-dynamics" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#analyze-forest-diversity-and-dynamics" class="anchor"></a><img src="https://i.imgur.com/vTLlhbp.png" align="right" height="88"> Analyze forest diversity and dynamics</h1></div>

<p><strong>fgeo</strong> helps you to install, load, and access the documentation of multiple packages to analyze forest diversity and dynamics. It allows you to manipulate and plot <a href="http://www.forestgeo.si.edu/">ForestGEO</a> data, and to do common analyses including abundance, demography, and species-habitats associations.</p>
<ul>
<li><a href="https://forestgeo.github.io/fgeo/articles/siteonly/reference.html">Search functions and datasets</a></li>
<li><a href="https://bit.ly/fgeo-demo">Try <strong>fgeo</strong> online</a></li>
<li><a href="https://github.com/forestgeo/fgeo/issues/new">Ask questions, report bugs, or propose features</a></li>
</ul>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p><strong>Expected R environment</strong></p>
<ul>
<li>R version is recent</li>
<li>All packages are updated (run <code><a href="https://www.rdocumentation.org/packages/utils/topics/update.packages">update.packages()</a></code>)</li>
<li>No other R session is running</li>
<li>Current R session is clean (click <em>Session &gt; Restart R</em>)</li>
</ul>
<p>Install the latest stable version of all <strong>fgeo</strong> packages with:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">these_repos &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/options">getOption</a></span>(<span class="st">"repos"</span>), <span class="st">"https://forestgeo.github.io/drat"</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"fgeo"</span>, <span class="dt">repos =</span> these_repos)</a></code></pre></div>
<p>Or install the development version of all <strong>fgeo</strong> packages with:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/source">source</a></span>(<span class="st">"https://install-github.me/forestgeo/fgeo"</span>)</a></code></pre></div>
<hr>
<ul>
<li>To remove packages see <code>?remove.packages()</code>
</li>
</ul>
<details><p><summary><strong>Tips to avoid or fix common installation problems</strong></summary></p>
<div id="update-r-rstudio-and-r-packages" class="section level4">
<h4 class="hasAnchor">
<a href="#update-r-rstudio-and-r-packages" class="anchor"></a>Update R, RStudio, and R packages</h4>
<ul>
<li><a href="https://fgeo.netlify.com/2018/02/08/2018-02-08-update-r-rstudio-and-r-packages/">How?</a></li>
<li><a href="https://fgeo.netlify.com/2018/03/06/2018-03-06-should-i-update-all-my-r-packages-frequently-yes-no-why/">Why?</a></li>
</ul>
</div>
<div id="instruct-rstudio-not-to-preserve-your-workspace-between-sessions" class="section level4">
<h4 class="hasAnchor">
<a href="#instruct-rstudio-not-to-preserve-your-workspace-between-sessions" class="anchor"></a>Instruct RStudio not to preserve your workspace between sessions</h4>
<ul>
<li><a href="https://r4ds.had.co.nz/workflow-projects.html#what-is-real">Why?</a></li>
</ul>
<p>In RStudio go to <em>Tools &gt; Global Options…</em></p>
<p><img src="https://i.imgur.com/QqPyHJu.png" align="center" height="450/"></p>
</div>
<div id="use-rstudio-projects-or-the-here-package" class="section level4">
<h4 class="hasAnchor">
<a href="#use-rstudio-projects-or-the-here-package" class="anchor"></a>Use RStudio projects (or the <a href="https://here.r-lib.org/"><strong>here</strong></a> package)</h4>
<ul>
<li><a href="https://www.tidyverse.org/articles/2017/12/workflow-vs-script/">Why?</a></li>
</ul>
<p><img src="https://user-images.githubusercontent.com/5856545/47810353-7d3ef900-dd19-11e8-951f-00afc2280198.png" align="center" height="350/"></p>
</div>
<div id="restart-r-many-times-each-day" class="section level4">
<h4 class="hasAnchor">
<a href="#restart-r-many-times-each-day" class="anchor"></a>Restart R many times each day</h4>
<p>Press Cmd/Ctrl + Shift + F10 to restart RStudio or go to <em>Session &gt; Restart R</em>.</p>
</div>
<div id="increase-the-rate-limit-to-request-downloads-from-github" class="section level4">
<h4 class="hasAnchor">
<a href="#increase-the-rate-limit-to-request-downloads-from-github" class="anchor"></a>Increase the rate limit to request downloads from GitHub</h4>
<p>See <a href="https://usethis.r-lib.org/reference/browse_github_pat.html"><code><a href="https://www.rdocumentation.org/packages/usethis/topics/browse_github_pat">usethis::browse_github_pat()</a></code></a>.</p>
</div>
<div id="prepare-your-system-to-build-packages-from-source" class="section level4">
<h4 class="hasAnchor">
<a href="#prepare-your-system-to-build-packages-from-source" class="anchor"></a>Prepare your system to build packages from source</h4>
<p>Sometimes you may need to install the <em>source</em> version of an R package (e.g. from CRAN or GitHub).</p>
<ul>
<li><a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html#prepare-your-system-to-build-packages-from-source">How?</a></li>
</ul>
</div>
<div id="troubleshoot-error-x11-library-is-missing-install-xquartz" class="section level4">
<h4 class="hasAnchor">
<a href="#troubleshoot-error-x11-library-is-missing-install-xquartz" class="anchor"></a>Troubleshoot: error: X11 library is missing: install XQuartz …</h4>
<p>If you are a mac user, <a href="https://forestgeo.github.io/fgeo.krig/"><strong>fgeo.krig</strong></a> may fail to install with the error below. Install XQuartz from <a href="https://www.xquartz.org/" class="uri">https://www.xquartz.org/</a> and try to install <a href="https://forestgeo.github.io/fgeo.krig/"><strong>fgeo.krig</strong></a> again.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1">Error <span class="op">:</span><span class="st"> </span>.onLoad failed <span class="cf">in</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/ns-load">loadNamespace</a></span>() <span class="cf">for</span> <span class="st">'tcltk'</span>, details<span class="op">:</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="st">  </span>call<span class="op">:</span><span class="st"> </span><span class="kw">fun</span>(libname, pkgname)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  error<span class="op">:</span><span class="st"> </span>X11 library is missing<span class="op">:</span><span class="st"> </span>install XQuartz from xquartz.macosforge.org</a></code></pre></div>

</div>
</details>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(fgeo)</a></code></pre></div>
<div id="explore-fgeo" class="section level3">
<h3 class="hasAnchor">
<a href="#explore-fgeo" class="anchor"></a>Explore <strong>fgeo</strong>
</h3>
<p>On an interactive session, <code><a href="reference/fgeo_help.html">fgeo_help()</a></code> and <code><a href="reference/fgeo_browse.html">fgeo_browse_reference()</a></code> help you to search documentation.</p>
<pre><code>if (interactive()) {
  # To search on the viewer; accepts keywords
  fgeo_help()
  # To search on a web browser
  fgeo_browse_reference() 
}</code></pre>
</div>
<div id="access-and-manipulate-data" class="section level3">
<h3 class="hasAnchor">
<a href="#access-and-manipulate-data" class="anchor"></a>Access and manipulate data</h3>
<p><code>example_path()</code> allows you to access datasets stored in your R libraries.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">example_path</span>()</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt;  [1] "csv"           "mixed_files"   "rdata"         "rdata_one"    </span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;  [5] "rds"           "taxa.csv"      "tsv"           "vft_4quad.csv"</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;  [9] "view"          "weird"         "xl"</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"></a>
<a class="sourceLine" id="cb6-6" data-line-number="6">(vft_file &lt;-<span class="st"> </span><span class="kw">example_path</span>(<span class="st">"view/vft_4quad.csv"</span>))</a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; [1] "C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/view/vft_4quad.csv"</span></a></code></pre></div>
<div id="read_table" class="section level4">
<h4 class="hasAnchor">
<a href="#read_table" class="anchor"></a><code>read_&lt;table&gt;()</code>
</h4>
<p><code>read_vft()</code> and <code>read_taxa()</code> import a ViewFullTable and ViewTaxonomy from .tsv or .csv files.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">read_vft</span>(vft_file)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; # A tibble: 500 x 32</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;     DBHID PlotName PlotID Family Genus SpeciesName Mnemonic Subspecies</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;     &lt;int&gt; &lt;chr&gt;     &lt;int&gt; &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;    &lt;chr&gt;     </span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;  1 385164 luquillo      1 Rubia~ Psyc~ brachiata   PSYBRA   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  2 385261 luquillo      1 Urtic~ Cecr~ schreberia~ CECSCH   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  3 384600 luquillo      1 Rubia~ Psyc~ brachiata   PSYBRA   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  4 608789 luquillo      1 Rubia~ Psyc~ berteroana  PSYBER   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  5 388579 luquillo      1 Areca~ Pres~ acuminata   PREMON   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  6 384626 luquillo      1 Arali~ Sche~ morototoni  SCHMOR   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  7 410958 luquillo      1 Rubia~ Psyc~ brachiata   PSYBRA   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  8 385102 luquillo      1 Piper~ Piper glabrescens PIPGLA   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  9 353163 luquillo      1 Areca~ Pres~ acuminata   PREMON   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 10 481018 luquillo      1 Salic~ Case~ arborea     CASARB   &lt;NA&gt;      </span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; # ... with 490 more rows, and 24 more variables: SpeciesID &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; #   SubspeciesID &lt;chr&gt;, QuadratName &lt;chr&gt;, QuadratID &lt;int&gt;, PX &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; #   PY &lt;dbl&gt;, QX &lt;dbl&gt;, QY &lt;dbl&gt;, TreeID &lt;int&gt;, Tag &lt;chr&gt;, StemID &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; #   StemNumber &lt;int&gt;, StemTag &lt;int&gt;, PrimaryStem &lt;chr&gt;, CensusID &lt;int&gt;,</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; #   PlotCensusNumber &lt;int&gt;, DBH &lt;dbl&gt;, HOM &lt;dbl&gt;, ExactDate &lt;date&gt;,</span></a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="co">#&gt; #   Date &lt;int&gt;, ListOfTSM &lt;chr&gt;, HighHOM &lt;int&gt;, LargeStem &lt;chr&gt;,</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="co">#&gt; #   Status &lt;chr&gt;</span></a></code></pre></div>
</div>
<div id="importing-multiple-censuses-from-a-directory-into-a-list" class="section level4">
<h4 class="hasAnchor">
<a href="#importing-multiple-censuses-from-a-directory-into-a-list" class="anchor"></a>Importing multiple censuses from a directory into a list</h4>
<p>(This and the following section don’t use <strong>fgeo</strong> because other packages already do this well.)</p>
<p>Combine <code><a href="http://fs.r-lib.org/reference/dir_ls.html">fs::dir_ls()</a></code> with <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map()</a></code> to import multiple censuses from a directory into a list:</p>
<ul>
<li>Use <code><a href="http://fs.r-lib.org/reference/dir_ls.html">fs::dir_ls()</a></code> to create the paths to the files you want to import.</li>
<li>Use <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::map()</a></code> to iterate over each path and apply a custom function to import them.</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(purrr)</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(fs)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"></a>
<a class="sourceLine" id="cb8-4" data-line-number="4">(rdata_files &lt;-<span class="st"> </span><span class="kw">example_path</span>(<span class="st">"rdata"</span>))</a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="co">#&gt; [1] "C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/rdata"</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6">(paths &lt;-<span class="st"> </span>fs<span class="op">::</span><span class="kw"><a href="http://fs.r-lib.org/reference/dir_ls.html">dir_ls</a></span>(rdata_files))</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="co">#&gt; C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/rdata/tree5.RData</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="co">#&gt; C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/rdata/tree6.RData</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"></a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="co"># The formula syntax `~ fun(.x)` is a shortcut for `function(.x) fun(.x)`</span></a>
<a class="sourceLine" id="cb8-11" data-line-number="11">censuses &lt;-<span class="st"> </span><span class="kw">map</span>(paths, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/get">get</a></span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/load">load</a></span>(.x)))</a>
<a class="sourceLine" id="cb8-12" data-line-number="12">censuses</a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="co">#&gt; $`C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/rdata/tree5.RData`</span></a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="co">#&gt; # A tibble: 3 x 19</span></a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="co">#&gt;   treeID stemID tag   StemTag sp    quadrat    gx    gy MeasureID CensusID</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="co">#&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-17" data-line-number="17"><span class="co">#&gt; 1    104    143 10009 10009   DACE~ 113      10.3  245.    439947        5</span></a>
<a class="sourceLine" id="cb8-18" data-line-number="18"><span class="co">#&gt; 2    119    158 1001~ 100104  MYRS~ 1021    183.   410.    466597        5</span></a>
<a class="sourceLine" id="cb8-19" data-line-number="19"><span class="co">#&gt; 3    180    225 1001~ 100174  CASA~ 921     165.   410.    466623        5</span></a>
<a class="sourceLine" id="cb8-20" data-line-number="20"><span class="co">#&gt; # ... with 9 more variables: dbh &lt;dbl&gt;, pom &lt;chr&gt;, hom &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb8-21" data-line-number="21"><span class="co">#&gt; #   ExactDate &lt;date&gt;, DFstatus &lt;chr&gt;, codes &lt;chr&gt;, nostems &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb8-22" data-line-number="22"><span class="co">#&gt; #   status &lt;chr&gt;, date &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb8-23" data-line-number="23"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-24" data-line-number="24"><span class="co">#&gt; $`C:/Users/LeporeM/Documents/R/win-library/3.5/fgeo.x/extdata/rdata/tree6.RData`</span></a>
<a class="sourceLine" id="cb8-25" data-line-number="25"><span class="co">#&gt; # A tibble: 3 x 19</span></a>
<a class="sourceLine" id="cb8-26" data-line-number="26"><span class="co">#&gt;   treeID stemID tag   StemTag sp    quadrat    gx    gy MeasureID CensusID</span></a>
<a class="sourceLine" id="cb8-27" data-line-number="27"><span class="co">#&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb8-28" data-line-number="28"><span class="co">#&gt; 1    104    143 10009 10009   DACE~ 113      10.3  245.    582850        6</span></a>
<a class="sourceLine" id="cb8-29" data-line-number="29"><span class="co">#&gt; 2    119    158 1001~ 100104  MYRS~ 1021    183.   410.    578696        6</span></a>
<a class="sourceLine" id="cb8-30" data-line-number="30"><span class="co">#&gt; 3    180    225 1001~ 100174  CASA~ 921     165.   410.    617049        6</span></a>
<a class="sourceLine" id="cb8-31" data-line-number="31"><span class="co">#&gt; # ... with 9 more variables: dbh &lt;dbl&gt;, pom &lt;chr&gt;, hom &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb8-32" data-line-number="32"><span class="co">#&gt; #   ExactDate &lt;date&gt;, DFstatus &lt;chr&gt;, codes &lt;chr&gt;, nostems &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb8-33" data-line-number="33"><span class="co">#&gt; #   status &lt;chr&gt;, date &lt;dbl&gt;</span></a></code></pre></div>
</div>
<div id="exporting-multiple-censuses-from-a-list-into-a-directory" class="section level4">
<h4 class="hasAnchor">
<a href="#exporting-multiple-censuses-from-a-list-into-a-directory" class="anchor"></a>Exporting multiple censuses from a list into a directory</h4>
<ul>
<li>Use <code><a href="https://purrr.tidyverse.org/reference/map2.html">purrr::walk2()</a></code> to map over two things in parallel – each census to each path to a file. It is similar to <code><a href="https://purrr.tidyverse.org/reference/map2.html">purrr::map2()</a></code> and <code><a href="https://www.rdocumentation.org/packages/base/topics/funprog">base::Map()</a></code> but prints nothing to the console.</li>
</ul>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">(files &lt;-<span class="st"> </span><span class="kw">path_file</span>(<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/names">names</a></span>(censuses)))</a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="co">#&gt; tree5.RData tree6.RData</span></a>
<a class="sourceLine" id="cb9-3" data-line-number="3">(folder &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempdir</a></span>())</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt; [1] "C:\\Users\\LeporeM\\AppData\\Local\\Temp\\1\\RtmpyGVa3O"</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5">(paths &lt;-<span class="st"> </span><span class="kw">path</span>(folder, files))</a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt; C:/Users/LeporeM/AppData/Local/Temp/1/RtmpyGVa3O/tree5.RData</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; C:/Users/LeporeM/AppData/Local/Temp/1/RtmpyGVa3O/tree6.RData</span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="kw">walk2</span>(censuses, paths, <span class="op">~</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/save">save</a></span>(.x, <span class="dt">file =</span> .y))</a>
<a class="sourceLine" id="cb9-10" data-line-number="10"></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co"># Confirm that the folder contains the files we just saved</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="kw">path_file</span>(<span class="kw">dir_ls</span>(folder, <span class="dt">regexp =</span> <span class="st">"tree"</span>))</a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; tree5.RData tree6.RData</span></a></code></pre></div>
</div>
<div id="pick_what-and-drop_what" class="section level4">
<h4 class="hasAnchor">
<a href="#pick_what-and-drop_what" class="anchor"></a><code>pick_&lt;what&gt;()</code> and <code>drop_&lt;what&gt;()</code>
</h4>
<p><strong>fgeo</strong> is pipe-friendly. You may not use pipes but often they make code easier to read.</p>
<blockquote>
<p>Use %&gt;% to emphasise a sequence of actions, rather than the object that the actions are being performed on.</p>
</blockquote>
<p>– <a href="https://style.tidyverse.org/pipes.html" class="uri">https://style.tidyverse.org/pipes.html</a></p>
<p><code>pick_dbh_under()</code>, <code>drop_status()</code> and friends pick and drop rows from a ForestGEO ViewFullTable or census table.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1">(census &lt;-<span class="st"> </span>censuses[[<span class="dv">2</span>]])</a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="co">#&gt; # A tibble: 3 x 19</span></a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="co">#&gt;   treeID stemID tag   StemTag sp    quadrat    gx    gy MeasureID CensusID</span></a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="co">#&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; 1    104    143 10009 10009   DACE~ 113      10.3  245.    582850        6</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt; 2    119    158 1001~ 100104  MYRS~ 1021    183.   410.    578696        6</span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt; 3    180    225 1001~ 100174  CASA~ 921     165.   410.    617049        6</span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt; # ... with 9 more variables: dbh &lt;dbl&gt;, pom &lt;chr&gt;, hom &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; #   ExactDate &lt;date&gt;, DFstatus &lt;chr&gt;, codes &lt;chr&gt;, nostems &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; #   status &lt;chr&gt;, date &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"></a>
<a class="sourceLine" id="cb10-12" data-line-number="12">census <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="st">  </span><span class="kw">pick_dbh_under</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; # A tibble: 2 x 19</span></a>
<a class="sourceLine" id="cb10-15" data-line-number="15"><span class="co">#&gt;   treeID stemID tag   StemTag sp    quadrat    gx    gy MeasureID CensusID</span></a>
<a class="sourceLine" id="cb10-16" data-line-number="16"><span class="co">#&gt;    &lt;int&gt;  &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt;</span></a>
<a class="sourceLine" id="cb10-17" data-line-number="17"><span class="co">#&gt; 1    119    158 1001~ 100104  MYRS~ 1021     183.  410.    578696        6</span></a>
<a class="sourceLine" id="cb10-18" data-line-number="18"><span class="co">#&gt; 2    180    225 1001~ 100174  CASA~ 921      165.  410.    617049        6</span></a>
<a class="sourceLine" id="cb10-19" data-line-number="19"><span class="co">#&gt; # ... with 9 more variables: dbh &lt;dbl&gt;, pom &lt;chr&gt;, hom &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb10-20" data-line-number="20"><span class="co">#&gt; #   ExactDate &lt;date&gt;, DFstatus &lt;chr&gt;, codes &lt;chr&gt;, nostems &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb10-21" data-line-number="21"><span class="co">#&gt; #   status &lt;chr&gt;, date &lt;dbl&gt;</span></a></code></pre></div>
<p><code>pick_main_stem()</code> and <code>pick_main_stemid()</code> pick the main stem or main stemid(s) of each tree in each census.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1">stem &lt;-<span class="st"> </span><span class="kw">download_data</span>(<span class="st">"luquillo_stem6_random"</span>)</a>
<a class="sourceLine" id="cb11-2" data-line-number="2"></a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(stem)</a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="co">#&gt; [1] 1320   19</span></a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/dim">dim</a></span>(<span class="kw">pick_main_stem</span>(stem))</a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="co">#&gt; [1] 1000   19</span></a></code></pre></div>
</div>
<div id="add_columns" class="section level4">
<h4 class="hasAnchor">
<a href="#add_columns" class="anchor"></a><code>add_&lt;column(s)&gt;()</code>
</h4>
<p><code>add_status_tree()</code>adds the column <code>status_tree</code> based on the status of all stems of each tree.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">stem <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(CensusID, treeID, stemID, status) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="st">  </span><span class="kw">add_status_tree</span>()</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1,320 x 5</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;    CensusID treeID stemID status status_tree</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt;       &lt;int&gt;  &lt;int&gt;  &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt;  1        6    104    143 A      A          </span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt;  2        6    119    158 A      A          </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt;  3       NA    180    222 G      A          </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt;  4       NA    180    223 G      A          </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt;  5        6    180    224 G      A          </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt;  6        6    180    225 A      A          </span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt;  7        6    602    736 A      A          </span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="co">#&gt;  8        6    631    775 A      A          </span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="co">#&gt;  9        6    647    793 A      A          </span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="co">#&gt; 10        6   1086   1339 A      A          </span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="co">#&gt; # ... with 1,310 more rows</span></a></code></pre></div>
<p><code>add_index()</code> and friends add columns to a ForestGEO-like dataframe.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1">stem <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw">select</span>(gx, gy) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="st">  </span><span class="kw">add_index</span>()</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="co">#&gt; Guessing: plotdim = c(320, 500)</span></a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="co">#&gt; * If guess is wrong, provide the correct argument `plotdim`</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="co">#&gt; # A tibble: 1,320 x 3</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="co">#&gt;       gx    gy index</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="co">#&gt;  1  10.3  245.    13</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="co">#&gt;  2 183.   410.   246</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="co">#&gt;  3 165.   410.   221</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="co">#&gt;  4 165.   410.   221</span></a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="co">#&gt;  5 165.   410.   221</span></a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="co">#&gt;  6 165.   410.   221</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="co">#&gt;  7 149.   414.   196</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="co">#&gt;  8  38.3  245.    38</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="co">#&gt;  9 143.   411.   196</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="co">#&gt; 10  68.9  253.    88</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="co">#&gt; # ... with 1,310 more rows</span></a></code></pre></div>
</div>
</div>
<div id="plot-data" class="section level3">
<h3 class="hasAnchor">
<a href="#plot-data" class="anchor"></a>Plot data</h3>
<p>For simplicity, we will focus on only a few species.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1">stem_2sp &lt;-<span class="st"> </span>stem <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/filter">filter</a></span>(sp <span class="op">%in%</span><span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/c">c</a></span>(<span class="st">"PREMON"</span>, <span class="st">"CASARB"</span>))</a></code></pre></div>
<p><code>autoplot()</code> and friends produce different output depending on the class of input. You can create different input classes, for example, with <code>sp()</code> and <code>sp_elev()</code>:</p>
<ul>
<li>Use <code>sp(census)</code> to plot the column <code>sp</code> of a <code>census</code> dataset – i.e. to plot species distribution.</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(<span class="kw">sp</span>(stem_2sp))</a>
<a class="sourceLine" id="cb15-2" data-line-number="2"><span class="co">#&gt; [1] "sp"         "tbl_df"     "tbl"        "data.frame"</span></a>
<a class="sourceLine" id="cb15-3" data-line-number="3"></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">autoplot</span>(<span class="kw">sp</span>(stem_2sp))</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.png" width="700"></p>
<ul>
<li>Use <code>sp_elev(census, elevation)</code> to plot the columns <code>sp</code> and <code>elev</code> of a <code>census</code> and <code>elevation</code> dataset, respectively – i.e. to plot species distribution and topography.</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"elevation"</span>)</a>
<a class="sourceLine" id="cb16-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/class">class</a></span>(<span class="kw">sp_elev</span>(stem_2sp, elevation))</a>
<a class="sourceLine" id="cb16-3" data-line-number="3"><span class="co">#&gt; [1] "sp_elev" "list"</span></a>
<a class="sourceLine" id="cb16-4" data-line-number="4"></a>
<a class="sourceLine" id="cb16-5" data-line-number="5"><span class="kw">autoplot</span>(<span class="kw">sp_elev</span>(stem_2sp, elevation))</a></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-13-1.png" width="700"></p>
</div>
<div id="analyze" class="section level3">
<h3 class="hasAnchor">
<a href="#analyze" class="anchor"></a>Analyze</h3>
<div id="abundance" class="section level4">
<h4 class="hasAnchor">
<a href="#abundance" class="anchor"></a>Abundance</h4>
<p><code>abundance()</code> and <code>basal_area()</code> calculate abundance and basal area, optionally by groups.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1"><span class="kw">abundance</span>(</a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  <span class="kw">pick_main_stem</span>(census)</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4"><span class="co">#&gt; # A tibble: 1 x 1</span></a>
<a class="sourceLine" id="cb17-5" data-line-number="5"><span class="co">#&gt;       n</span></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="co">#&gt;   &lt;int&gt;</span></a>
<a class="sourceLine" id="cb17-7" data-line-number="7"><span class="co">#&gt; 1     3</span></a>
<a class="sourceLine" id="cb17-8" data-line-number="8"></a>
<a class="sourceLine" id="cb17-9" data-line-number="9">by_species &lt;-<span class="st"> </span><span class="kw">group_by</span>(census, sp)</a>
<a class="sourceLine" id="cb17-10" data-line-number="10"></a>
<a class="sourceLine" id="cb17-11" data-line-number="11"><span class="kw">basal_area</span>(by_species)</a>
<a class="sourceLine" id="cb17-12" data-line-number="12"><span class="co">#&gt; # A tibble: 3 x 2</span></a>
<a class="sourceLine" id="cb17-13" data-line-number="13"><span class="co">#&gt; # Groups:   sp [3]</span></a>
<a class="sourceLine" id="cb17-14" data-line-number="14"><span class="co">#&gt;   sp     basal_area</span></a>
<a class="sourceLine" id="cb17-15" data-line-number="15"><span class="co">#&gt;   &lt;chr&gt;       &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb17-16" data-line-number="16"><span class="co">#&gt; 1 CASARB      1669.</span></a>
<a class="sourceLine" id="cb17-17" data-line-number="17"><span class="co">#&gt; 2 DACEXC     29865.</span></a>
<a class="sourceLine" id="cb17-18" data-line-number="18"><span class="co">#&gt; 3 MYRSPL      1583.</span></a></code></pre></div>
</div>
<div id="demography" class="section level4">
<h4 class="hasAnchor">
<a href="#demography" class="anchor"></a>Demography</h4>
<p><code>recruitment_ctfs()</code>, <code>mortality_ctfs()</code>, and <code>growth_ctfs()</code> calculate recruitment, mortality, and growth. They all output a list. <code>as_tibble()</code> converts the output from a list to a more convenient dataframe.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"tree5"</span>)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2"></a>
<a class="sourceLine" id="cb18-3" data-line-number="3"><span class="kw">as_tibble</span>(</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">  <span class="kw">mortality_ctfs</span>(tree5, tree6)</a>
<a class="sourceLine" id="cb18-5" data-line-number="5">)</a>
<a class="sourceLine" id="cb18-6" data-line-number="6"><span class="co">#&gt; Detected dbh ranges:</span></a>
<a class="sourceLine" id="cb18-7" data-line-number="7"><span class="co">#&gt;   * `census1` = 10.9-323.</span></a>
<a class="sourceLine" id="cb18-8" data-line-number="8"><span class="co">#&gt;   * `census2` = 10.5-347.</span></a>
<a class="sourceLine" id="cb18-9" data-line-number="9"><span class="co">#&gt; Using dbh `mindbh = 0` and above.</span></a>
<a class="sourceLine" id="cb18-10" data-line-number="10"><span class="co">#&gt; # A tibble: 1 x 9</span></a>
<a class="sourceLine" id="cb18-11" data-line-number="11"><span class="co">#&gt;       N     D    rate   lower  upper  time  date1  date2 dbhmean</span></a>
<a class="sourceLine" id="cb18-12" data-line-number="12"><span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb18-13" data-line-number="13"><span class="co">#&gt; 1    27     1 0.00834 0.00195 0.0448  4.52 18938. 20590.    101.</span></a></code></pre></div>
</div>
<div id="species-habitats-association" class="section level4">
<h4 class="hasAnchor">
<a href="#species-habitats-association" class="anchor"></a>Species-habitats association</h4>
<p><code>tt_test()</code> runs a torus translation test to determine habitat associations of tree species. <code>as_tibble()</code> converts the output from a list to a more convenient dataframe. <code><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary()</a></code> helps you to interpret the result.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co"># This analysis makes sense only for tree tables</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">tree &lt;-<span class="st"> </span><span class="kw">download_data</span>(<span class="st">"luquillo_tree5_random"</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/data">data</a></span>(<span class="st">"habitat"</span>)</a>
<a class="sourceLine" id="cb19-4" data-line-number="4">result &lt;-<span class="st"> </span><span class="kw">tt_test</span>(tree, habitat)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; Using `plotdim = c(320, 500)`. To change this value see `?tt_test()`.</span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt; Using `gridsize = 20`. To change this value see `?tt_test()`.</span></a>
<a class="sourceLine" id="cb19-7" data-line-number="7"></a>
<a class="sourceLine" id="cb19-8" data-line-number="8"><span class="kw">as_tibble</span>(result)</a>
<a class="sourceLine" id="cb19-9" data-line-number="9"><span class="co">#&gt; # A tibble: 292 x 8</span></a>
<a class="sourceLine" id="cb19-10" data-line-number="10"><span class="co">#&gt;    habitat sp     N.Hab Gr.Hab Ls.Hab Eq.Hab Rep.Agg.Neut Obs.Quantile</span></a>
<a class="sourceLine" id="cb19-11" data-line-number="11"><span class="co">#&gt;  * &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;        &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb19-12" data-line-number="12"><span class="co">#&gt;  1 1       ALCFLO     2   1443    153      4            0        0.902</span></a>
<a class="sourceLine" id="cb19-13" data-line-number="13"><span class="co">#&gt;  2 2       ALCFLO     1    807    778     15            0        0.504</span></a>
<a class="sourceLine" id="cb19-14" data-line-number="14"><span class="co">#&gt;  3 3       ALCFLO     0      0    715    885           -1        0    </span></a>
<a class="sourceLine" id="cb19-15" data-line-number="15"><span class="co">#&gt;  4 4       ALCFLO     0      0    402   1198           -1        0    </span></a>
<a class="sourceLine" id="cb19-16" data-line-number="16"><span class="co">#&gt;  5 1       ALCLAT     0      0    544   1056           -1        0    </span></a>
<a class="sourceLine" id="cb19-17" data-line-number="17"><span class="co">#&gt;  6 2       ALCLAT     1   1432    156     12            0        0.895</span></a>
<a class="sourceLine" id="cb19-18" data-line-number="18"><span class="co">#&gt;  7 3       ALCLAT     0      0    324   1276           -1        0    </span></a>
<a class="sourceLine" id="cb19-19" data-line-number="19"><span class="co">#&gt;  8 4       ALCLAT     0      0    144   1456           -1        0    </span></a>
<a class="sourceLine" id="cb19-20" data-line-number="20"><span class="co">#&gt;  9 1       ANDINE     1   1117    466     17            0        0.698</span></a>
<a class="sourceLine" id="cb19-21" data-line-number="21"><span class="co">#&gt; 10 2       ANDINE     1   1081    510      9            0        0.676</span></a>
<a class="sourceLine" id="cb19-22" data-line-number="22"><span class="co">#&gt; # ... with 282 more rows</span></a>
<a class="sourceLine" id="cb19-23" data-line-number="23"></a>
<a class="sourceLine" id="cb19-24" data-line-number="24"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/summary">summary</a></span>(result)</a>
<a class="sourceLine" id="cb19-25" data-line-number="25"><span class="co">#&gt; # A tibble: 292 x 3</span></a>
<a class="sourceLine" id="cb19-26" data-line-number="26"><span class="co">#&gt;    sp     habitat association</span></a>
<a class="sourceLine" id="cb19-27" data-line-number="27"><span class="co">#&gt;    &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;      </span></a>
<a class="sourceLine" id="cb19-28" data-line-number="28"><span class="co">#&gt;  1 ALCFLO 1       neutral    </span></a>
<a class="sourceLine" id="cb19-29" data-line-number="29"><span class="co">#&gt;  2 ALCFLO 2       neutral    </span></a>
<a class="sourceLine" id="cb19-30" data-line-number="30"><span class="co">#&gt;  3 ALCFLO 3       repelled   </span></a>
<a class="sourceLine" id="cb19-31" data-line-number="31"><span class="co">#&gt;  4 ALCFLO 4       repelled   </span></a>
<a class="sourceLine" id="cb19-32" data-line-number="32"><span class="co">#&gt;  5 ALCLAT 1       repelled   </span></a>
<a class="sourceLine" id="cb19-33" data-line-number="33"><span class="co">#&gt;  6 ALCLAT 2       neutral    </span></a>
<a class="sourceLine" id="cb19-34" data-line-number="34"><span class="co">#&gt;  7 ALCLAT 3       repelled   </span></a>
<a class="sourceLine" id="cb19-35" data-line-number="35"><span class="co">#&gt;  8 ALCLAT 4       repelled   </span></a>
<a class="sourceLine" id="cb19-36" data-line-number="36"><span class="co">#&gt;  9 ANDINE 1       neutral    </span></a>
<a class="sourceLine" id="cb19-37" data-line-number="37"><span class="co">#&gt; 10 ANDINE 2       neutral    </span></a>
<a class="sourceLine" id="cb19-38" data-line-number="38"><span class="co">#&gt; # ... with 282 more rows</span></a></code></pre></div>
</div>
</div>
</div>
<div id="related-projects" class="section level2">
<h2 class="hasAnchor">
<a href="#related-projects" class="anchor"></a>Related projects</h2>
<p>Additional packages maintained by ForestGEO but not included in <strong>fgeo</strong>:</p>
<ul>
<li>
<a href="https://forestgeo.github.io/fgeo.data/"><strong>fgeo.data</strong></a>: Open datasets of ForestGEO.</li>
<li>
<a href="https://forestgeo.github.io/fgeo.krig/"><strong>fgeo.krig</strong></a>: Analyze soils.</li>
</ul>
<p>Other packages not maintained by ForestGEO:</p>
<ul>
<li>
<a href="http://ctfs.si.edu/Public/CTFSRPackage/">CTFS-R Package</a>: The original package of CTFS functions. No longer supported by ForestGEO.</li>
<li>
<a href="https://CRAN.R-project.org/package=BIOMASS"><strong>BIOMASS</strong></a>: An R package to estimate above-ground biomass in tropical forests.</li>
</ul>
</div>
<div id="r-code-from-recent-publications-by-forestgeo-partners" class="section level2">
<h2 class="hasAnchor">
<a href="#r-code-from-recent-publications-by-forestgeo-partners" class="anchor"></a>R code from recent publications by ForestGEO partners</h2>
<p>Data have been made available as required by the journal to enable reproduction of the results presented in the paper. Please do not share these data without permission of the ForestGEO plot Principal Investigators (PIs). If you wish to publish papers based on these data, you are also required to get permission from the PIs of the corresponding ForestGEO plots.</p>
<ul>
<li><a href="https://github.com/SoilLabAtSTRI/Soil-drivers-of-tree-growth">Soil drivers of local-scale tree growth in a lowland tropical forest (Zemunik et al., 2018).</a></li>
<li>
<a href="https://github.com/forestgeo/LaManna_et_al_Science">Plant diversity increases with the strength of negative density dependence at the global scale (LaManna et al., 2018)</a>
<ul>
<li>Response #1: LaManna et al. 2018. Response to Comment on “Plant diversity increases with the strength of negative density dependence at the global scale” Science Vol. 360, Issue 6391, eaar3824. DOI: 10.1126/science.aar3824</li>
<li>Response #2: LaManna et al. 2018. Response to Comment on “Plant diversity increases with the strength of negative density dependence at the global scale”. Science Vol. 360, Issue 6391, eaar5245. DOI: 10.1126/science.aar5245</li>
</ul>
</li>
</ul>
</div>
<div id="information" class="section level2">
<h2 class="hasAnchor">
<a href="#information" class="anchor"></a>Information</h2>
<ul>
<li>
<a href="SUPPORT.html">Getting help</a>.</li>
<li>
<a href="CONTRIBUTING.html">Contributing</a>.</li>
<li>
<a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>.</li>
</ul>
</div>
<div id="acknowledgments" class="section level2">
<h2 class="hasAnchor">
<a href="#acknowledgments" class="anchor"></a>Acknowledgments</h2>
<p>Thanks to all partners of ForestGEO for sharing their ideas and code. For feedback on <strong>fgeo</strong>, special thanks to Gabriel Arellano, Stuart Davies, Lauren Krizel, Sean McMahon, and Haley Overstreet. For all other help, I thank contributors in the the documentation of the features they helped with.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/forestgeo/fgeo">https://​github.com/​forestgeo/​fgeo</a>
</li>
<li>Report a bug at <br><a href="https://github.com/forestgeo/fgeo/issues">https://​github.com/​forestgeo/​fgeo/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://forestgeo.si.edu/mauro-lepore">Mauro Lepore</a> <br><small class="roles"> Author, contractor, maintainer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/arellano-gabriel">Gabriel Arellano</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li> Richard  Condit <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://forestgeo.si.edu/stuart-j-davies">Stuart Davies</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>Matteo Detto <br><small class="roles"> Author </small>  </li>
<li>Pamela Hall <br><small class="roles"> Author </small>  </li>
<li>Kyle Harms <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://forestgeo.si.edu/david-kenfack">David Kenfack</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/suzanne-lao">Suzanne Lao</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/sean-mcmahon">Sean McMahon</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="http://russolab.unl.edu">Sabrina Russo</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="https://forestgeo.si.edu/kristina-j-anderson-teixeira">Kristina Teixeira</a> <br><small class="roles"> Author, reviewer </small>  </li>
<li>Graham Zemunik <br><small class="roles"> Author, reviewer </small>  </li>
<li>Daniel Zuleta <br><small class="roles"> Author, reviewer </small>  </li>
<li>
<a href="http://www.forestgeo.si.edu/">CTFS-ForestGEO</a> <br><small class="roles"> Copyright holder, funder </small>  </li>
<li><a href="authors.html">All authors...</a></li>
</ul>
</div>

      <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="lifecycle"></a></li>
<li><a href="https://travis-ci.org/forestgeo/fgeo"><img src="https://travis-ci.org/forestgeo/fgeo.svg?branch=master" alt="Travis build status"></a></li>
<li><a href="https://codecov.io/github/forestgeo/fgeo?branch=master"><img src="https://codecov.io/gh/forestgeo/fgeo/branch/master/graph/badge.svg" alt="Coverage status"></a></li>
<li><a href="https://cran.r-project.org/package=fgeo"><img src="https://www.r-pkg.org/badges/version/fgeo" alt="CRAN status"></a></li>
</ul>
</div>
</div>

</div>


      <footer><div class="copyright">
  <p>Developed by <a href="https://forestgeo.si.edu/mauro-lepore">Mauro Lepore</a>, <a href="https://forestgeo.si.edu/arellano-gabriel">Gabriel Arellano</a>,  Richard  Condit, <a href="https://forestgeo.si.edu/stuart-j-davies">Stuart Davies</a>, Matteo Detto, Pamela Hall, Kyle Harms, <a href="https://forestgeo.si.edu/david-kenfack">David Kenfack</a>, <a href="https://forestgeo.si.edu/suzanne-lao">Suzanne Lao</a>, <a href="https://forestgeo.si.edu/sean-mcmahon">Sean McMahon</a>, <a href="http://russolab.unl.edu">Sabrina Russo</a>, <a href="https://forestgeo.si.edu/kristina-j-anderson-teixeira">Kristina Teixeira</a>, Graham Zemunik, Daniel Zuleta, <a href="http://www.forestgeo.si.edu/">CTFS-ForestGEO</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
